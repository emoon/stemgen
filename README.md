# stemgen

STEM generator using libopenmpt with glue in Rust

# Building

Download Rust by following the instructions here https://rustup.rs
Notice that a C++ toolchain needs to be installed along with Cmake as well. On Windows this means Visual Studo 2019 or later and on Linux or macOS clang or gcc.

`cargo build --release`

And to run

`cargo run --release -- <parameters>`

or just run directly from

`target/release/stemgen`

after building the release config

# Usage

```
sage: stemgen [OPTIONS] --input <INPUT> --output <OUTPUT>

Options:
  -i, --input <INPUT>
          Input file or directory of files supported by libopenmpt
  -o, --output <OUTPUT>
          Output directory to place the generated wav files
  -r, --recursive
          If input is a directory recursive can be used to get the all files within that directory
      --stereo-separation <STEREO_SEPARATION>
          Represents the stereo separation generated by the mixer in percent. Range is [0, 200] and default value is 100
      --full
          Render the whole song as is
      --progress
          Show progressbar when generating
  -s, --sample-rate <SAMPLE_RATE>
          Output sample rate. Should be in [8000, 192000] [default: 48000]
      --stereo
          Render the instruments to stereo wav files. mono is default
  -c, --channels
          Render each instrument for each channel (if false only a _all file will be generated)
      --instruments
          Render each instrument to a separate file
      --samples
          Write samples in the song to disk (best effort)
  -f, --format <FORMAT>
          Sample depth for the rendering. Supported are "float" and "int16" [default: int16]
  -w, --write <WRITE>
          Write format for the rendering. Supported are "flac" and "wav" [default: flac]
  -h, --help
          Print help
  -V, --version
          Print version
```
